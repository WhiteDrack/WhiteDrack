<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Jump Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #121212; color: white; padding: 20px; }
        .container { margin-top: 50px; }
        #height { font-size: 48px; color: #00ffcc; margin: 20px 0; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; background: #00ffcc; border: none; border-radius: 10px; font-weight: bold; }
        p { color: #888; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Uchaai Tracker ðŸš€</h1>
        <p>Phone ko upar uchhalein aur catch karein</p>
        
        <div id="height">0.00 m</div>
        
        <button onclick="requestPermission()">Start Sensor</button>
        <p id="status">Status: Ready</p>
    </div>

    <script>
        let isFreeFalling = false;
        let startTime = 0;
        const statusText = document.getElementById('status');
        const heightDisplay = document.getElementById('height');

        function requestPermission() {
            // iOS 13+ ke liye permission chahiye hoti hai
            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(response => {
                        if (response == 'granted') {
                            window.addEventListener('devicemotion', handleMotion);
                            statusText.innerText = "Status: Tracking...";
                        }
                    })
                    .catch(console.error);
            } else {
                // Android aur purane browsers ke liye
                window.addEventListener('devicemotion', handleMotion);
                statusText.innerText = "Status: Tracking...";
            }
        }

        function handleMotion(event) {
            let acc = event.accelerationIncludingGravity;
            if (!acc) return;

            // Total acceleration (Net Force)
            let totalAcc = Math.sqrt(acc.x**2 + acc.y**2 + acc.z**2);

            // Freefall detect karna (Jab gravity 0 ke kareeb ho jaye)
            // Normal gravity ~9.8 hoti hai, freefall mein ye 2 se kam ho jati hai
            if (totalAcc < 2.5 && !isFreeFalling) {
                isFreeFalling = true;
                startTime = performance.now();
                statusText.innerText = "Status: Hawa mein hai!";
            }

            // Jab phone catch kiya jaye (Freefall khatam)
            if (totalAcc > 12 && isFreeFalling) {
                let duration = (performance.now() - startTime) / 1000; // seconds
                isFreeFalling = false;
                calculateHeight(duration);
                statusText.innerText = "Status: Captured!";
            }
        }

        function calculateHeight(t) {
            // Physics Formula: h = 1/8 * g * t^2 
            // Kyunki t total time hai (upar jane + niche aane ka)
            const g = 9.81;
            let h = 0.125 * g * Math.pow(t, 2);
            
            if (h > 0.05) { // Choti errors ko ignore karne ke liye
                heightDisplay.innerText = h.toFixed(2) + " m";
            }
        }
    </script>
</body>
</html>

