<!DOCTYPE html>
<html lang="hi">
<head>
Â Â Â Â <meta charset="UTF-8">
Â Â Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â Â Â Â <title>Jump Pro - Ultimate</title>
Â Â Â Â <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
Â Â Â Â <link rel="stylesheet" href="style.css">
</head>
<body>
Â Â Â Â <div id="loginPage" class="page active">
Â Â Â Â Â Â Â Â <div class="card" style="margin-top: 100px;">
Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-rocket" style="font-size: 50px; color: var(--primary);"></i>
Â Â Â Â Â Â Â Â Â Â Â Â <h2>Jump Pro</h2>
Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="login()" class="btn-main" style="margin-top:20px; background:#fff;">Continue with Google</button>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <div id="jumpPage" class="page">
Â Â Â Â Â Â Â Â <div class="card">
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="openSearchModal()" class="search-icon-btn">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-search"></i>
Â Â Â Â Â Â Â Â Â Â Â Â </button>
Â Â Â Â Â Â Â Â Â Â Â Â <div id="seasonDisplay" class="season-badge">Loading Season...</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div id="roundDisplay" style="color:#8b949e; font-size:12px; margin-bottom:15px;">Loading...</div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div id="height">0.00</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div style="color: #484f58; font-size: 12px;">METERS (INSTANT)</div>
Â Â Â Â Â Â Â Â Â Â Â Â <div id="status" style="margin: 20px 0; color: #e3b341; font-weight: bold;">READY</div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div style="background:#0d1117; padding:10px; border-radius:10px; margin-bottom:20px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div style="font-size:12px; color:#8b949e;">SEASON BEST</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="todayBest" style="font-size:20px; font-weight:bold; color:#fff;">0.00m</div>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <button id="startBtn" class="btn-main">ACTIVATE SENSOR</button>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <div id="leaderboardPage" class="page">
Â Â Â Â Â Â Â Â <h2 style="margin-bottom: 5px;"><i class="fas fa-trophy"></i> Global Rank</h2>
Â Â Â Â Â Â Â Â <div style="font-size: 12px; color: #8b949e; margin-bottom: 15px;" id="lbSeasonName">Current Month</div>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <p style="font-size: 10px; color: #555; margin-top: 5px;">(Tap a player to view profile)</p>
Â Â Â Â Â Â Â Â <div id="lbList" class="lb-container"><p style="color:#555">Waiting for data...</p></div>
Â Â Â Â </div>
Â Â Â Â <div id="profilePage" class="page">
Â Â Â Â Â Â Â Â <div class="card">
Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="openMailbox()" class="inbox-icon-btn">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-envelope"></i>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span id="mailCount" class="badge" style="display:none;">0</span>
Â Â Â Â Â Â Â Â Â Â Â Â </button>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="profile-img-container" id="myProfileContainer">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <img id="pImg" style="width:80px; height:80px; border-radius:50%; border:2px solid var(--primary); object-fit:cover;" src="">
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <h2 id="pName" style="margin: 10px 0;">Name</h2>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="uid-box">ID: <span id="pUid" style="color:#fff; font-weight:bold;">---</span></div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div style="margin-top: 20px; background: #0d1117; padding: 20px; border-radius: 15px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size:11px; color:#555;">SEASON BEST SCORE</span><br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span id="pTotal" style="font-size:32px; font-weight:800; color:var(--primary);">0.00m</span>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div style="margin-top: 30px; width: 100%;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h3 style="text-align: left; margin-bottom: 10px; border-bottom: 1px solid #30363d; padding-bottom: 10px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-medal" style="color: #e3b341;"></i> Trophy Case
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </h3>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="awardsList" class="awards-grid">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p style="grid-column: span 3; color: #555; font-size: 12px;">No awards earned yet.</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="logout()" style="margin-top:20px; background:none; border:none; color:#f85149; cursor:pointer;">Logout</button>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <div id="publicProfilePage" class="page" style="z-index: 2000;">
Â Â Â Â Â Â Â Â <div class="card">
Â Â Â Â Â Â Â Â Â Â Â Â <div style="width:100%; display:flex; justify-content:flex-start;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="closePublicProfile()" style="background:none; border:none; color:#8b949e; cursor:pointer; display:flex; align-items:center; gap:5px; font-size:14px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-arrow-left"></i> Back
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </button>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div class="profile-img-container" id="publicProfileContainer">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <img id="ppImg" style="width:80px; height:80px; border-radius:50%; border:2px solid #58a6ff; object-fit:cover;" src="">
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <h2 id="ppName" style="margin: 10px 0;">Player</h2>
Â Â Â Â Â Â Â Â Â Â Â Â <div class="uid-box">ID: <span id="ppUid" style="color:#fff; font-weight:bold;">---</span></div>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <div style="margin-top: 20px; background: #0d1117; padding: 20px; border-radius: 15px; border: 1px solid #30363d;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span style="font-size:11px; color:#555;">SEASON BEST SCORE</span><br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span id="ppTotal" style="font-size:32px; font-weight:800; color:#58a6ff;">0.00m</span>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â <div style="margin-top: 30px; width: 100%;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h3 style="text-align: left; margin-bottom: 10px; border-bottom: 1px solid #30363d; padding-bottom: 10px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas fa-trophy" style="color: #58a6ff;"></i> Awards
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </h3>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div id="ppAwardsList" class="awards-grid">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p style="grid-column: span 3; color: #555; font-size: 12px;">Loading awards...</p>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <div id="searchModal" class="modal-overlay" style="display:none;">
Â Â Â Â Â Â Â Â <div class="card modal-card">
Â Â Â Â Â Â Â Â Â Â Â Â <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h3><i class="fas fa-search"></i> Search Player</h3>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="closeSearchModal()" style="background:none; border:none; color:#8b949e; font-size:20px; cursor:pointer;">&times;</button>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â <div style="padding-bottom:15px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <input type="number" id="modalSearchInput" class="search-input" placeholder="Enter Player ID (e.g. 849201)" style="width:100%; box-sizing:border-box; margin-bottom:10px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="searchPlayer()" class="search-btn" style="width:100%;">FIND PLAYER</button>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <div id="mailModal" class="modal-overlay" style="display:none;">
Â Â Â Â Â Â Â Â <div class="card modal-card">
Â Â Â Â Â Â Â Â Â Â Â Â <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <h3><i class="fas fa-gift"></i> Inbox</h3>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <button onclick="closeMailbox()" style="background:none; border:none; color:#8b949e; font-size:20px; cursor:pointer;">&times;</button>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â Â Â Â Â <div id="mailList" style="text-align:left; max-height:300px; overflow-y:auto;">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <p style="color:#555; text-align:center;">Loading messages...</p>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â Â Â <nav class="nav-bar" id="bottomNav" style="display:none;">
Â Â Â Â Â Â Â Â <button class="nav-item active-nav" onclick="navTo('jumpPage', this)"><i class="fas fa-bolt"></i><span>JUMP</span></button>
Â Â Â Â Â Â Â Â <button class="nav-item" onclick="navTo('leaderboardPage', this)"><i class="fas fa-chart-line"></i><span>RANK</span></button>
Â Â Â Â Â Â Â Â <button class="nav-item" onclick="navTo('profilePage', this)"><i class="fas fa-user-circle"></i><span>PROFILE</span></button>
Â Â Â Â </nav>
Â Â Â Â <script type="module" src="script.js"></script>
</body>
</html>
:root { --primary: #00ff88; --gold: #ffd700; --silver: #e0e0e0; --bronze: #cd7f32; --bg: #0b0f19; --card: #161b22; --text: #f0f6fc; --nav-bg: #1f242d; }
body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; min-height: 100vh; display: flex; flex-direction: column; }
/* Page & Layout */
.page { display: none; flex-direction: column; align-items: center; width: 100%; padding: 20px; box-sizing: border-box; flex: 1; overflow-y: auto; padding-bottom: 100px; }
.active { display: flex; animation: fadeIn 0.3s ease; }
.card { position: relative; background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #30363d; width: 100%; max-width: 400px; text-align: center; }
/* --- SEARCH & INBOX BUTTONS --- */
.search-container { display: flex; gap: 10px; width: 100%; max-width: 400px; margin-bottom: 15px; }
.search-input { flex: 1; padding: 12px; background: #0d1117; border: 1px solid #30363d; color: #fff; border-radius: 8px; outline: none; font-size: 14px; }
.search-btn { background: #1f6feb; color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; }
.inbox-icon-btn, .search-icon-btn { position: absolute; top: 15px; right: 15px; background: #1f242d; border: 1px solid #30363d; color: #fff; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.5); z-index: 10; transition: transform 0.2s; }
.search-icon-btn { right: auto; left: 15px; } /* Search left mein */
.inbox-icon-btn:active, .search-icon-btn:active { transform: scale(0.9); }
.badge { position: absolute; top: -2px; right: -2px; background: #f85149; color: white; border-radius: 50%; width: 15px; height: 15px; font-size: 9px; display: flex; align-items: center; justify-content: center; border: 1px solid #161b22; }
/* --- NEW TROPHY DESIGN (MEDALS, NO BOXES) --- */
.awards-grid { 
Â Â Â Â display: grid; 
Â Â Â Â grid-template-columns: repeat(3, 1fr); 
Â Â Â Â gap: 15px; /* Thoda gap badhaya */
Â Â Â Â width: 100%; 
Â Â Â Â margin-top: 25px; 
}
/* Base Style for All Awards - Remove Box Background */
.award-card, .special-trophy-card { 
Â Â Â Â background: transparent; /* No Box Color */
Â Â Â Â border: none; /* No Border */
Â Â Â Â padding: 0;
Â Â Â Â display: flex; 
Â Â Â Â flex-direction: column; 
Â Â Â Â align-items: center; 
Â Â Â Â justify-content: flex-start; 
Â Â Â Â min-height: 90px;
Â Â Â Â position: relative;
Â Â Â Â animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
/* --- THE MEDAL CIRCLE (This creates the trophy look) --- */
.award-card i, .special-trophy-card i {
Â Â Â Â width: 50px;
Â Â Â Â height: 50px;
Â Â Â Â display: flex;
Â Â Â Â align-items: center;
Â Â Â Â justify-content: center;
Â Â Â Â border-radius: 50%; /* Circle Shape */
Â Â Â Â font-size: 22px;
Â Â Â Â margin-bottom: 8px;
Â Â Â Â box-shadow: 0 5px 15px rgba(0,0,0,0.5), inset 0 2px 5px rgba(255,255,255,0.3);
Â Â Â Â border: 2px solid rgba(255,255,255,0.1);
Â Â Â Â transition: transform 0.2s;
}
.award-card:active i, .special-trophy-card:active i {
Â Â Â Â transform: scale(0.9);
}
/* Titles are now floating below */
.award-card div, .special-trophy-card .special-title {
Â Â Â Â font-size: 10px;
Â Â Â Â color: #8b949e;
Â Â Â Â font-weight: 600;
Â Â Â Â text-align: center;
Â Â Â Â line-height: 1.2;
}
/* --- RANK MEDALS (1, 2, 3) --- */
.rank-1 i { background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b); color: #fff; text-shadow: 0 1px 2px #000; border: 2px solid #ffed4a; }
.rank-2 i { background: radial-gradient(circle at 30% 30%, #e0e0e0, #757575); color: #fff; text-shadow: 0 1px 2px #000; border: 2px solid #fff; }
.rank-3 i { background: radial-gradient(circle at 30% 30%, #cd7f32, #8b4513); color: #fff; text-shadow: 0 1px 2px #000; border: 2px solid #ffaf7a; }
.rank-top i { background: #161b22; color: #58a6ff; border: 1px solid #30363d; box-shadow: none; } /* Normal Ranks flat */
/* --- SPECIAL PREMIUM TROPHIES (Gem/Orb Look) --- */
/* 1. TITAN (Golden Orb) */
.style-titan i {
Â Â Â Â background: radial-gradient(circle at 30% 30%, #fffacd, #ffd700, #b8860b);
Â Â Â Â color: #5a3e00;
Â Â Â Â box-shadow: 0 0 15px #ffd700;
Â Â Â Â border: 2px solid #fff;
}
.style-titan .special-title { color: #ffd700; text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
/* 2. VELOCITY (Ruby Red) */
.style-velocity i {
Â Â Â Â background: radial-gradient(circle at 30% 30%, #ff4d4d, #990000);
Â Â Â Â color: #fff;
Â Â Â Â box-shadow: 0 0 15px #ff004c;
Â Â Â Â border: 2px solid #ff9999;
}
.style-velocity .special-title { color: #ff4d4d; }
/* 3. LEGACY (Emerald/Teal) */
.style-legacy i {
Â Â Â Â background: radial-gradient(circle at 30% 30%, #7fffd4, #008080);
Â Â Â Â color: #003333;
Â Â Â Â box-shadow: 0 0 15px #7fffd4;
Â Â Â Â border: 2px solid #e0ffff;
}
.style-legacy .special-title { color: #7fffd4; }
/* 4. APEX (Sapphire Blue) */
.style-apex i {
Â Â Â Â background: radial-gradient(circle at 30% 30%, #00d2ff, #0056b3);
Â Â Â Â color: #fff;
Â Â Â Â box-shadow: 0 0 15px #00d2ff;
Â Â Â Â border: 2px solid #cceeff;
}
.style-apex .special-title { color: #00d2ff; }
/* 5. HEART (Rose Gold/Pink) */
.style-heart i {
Â Â Â Â background: radial-gradient(circle at 30% 30%, #ffb6c1, #ff1493);
Â Â Â Â color: #fff;
Â Â Â Â box-shadow: 0 0 15px #ff69b4;
Â Â Â Â border: 2px solid #ffe4e1;
}
.style-heart .special-title { color: #ff69b4; }
/* --- OTHER UI ELEMENTS --- */
.profile-img-container { position: relative; display: inline-block; margin-top: 20px; padding: 5px; }
.legendary-ring::before { content: ''; position: absolute; inset: -3px; background: conic-gradient(from 0deg, transparent 0%, #ffd700 20%, #b8860b 50%, #ffd700 80%, transparent 100%); border-radius: 50%; z-index: -1; animation: rotateGold 4s linear infinite; filter: blur(4px); }
.legendary-ring::after { content: ''; position: absolute; inset: -1px; background: linear-gradient(45deg, #ffd700, #ffb700); border-radius: 50%; z-index: -1; }
.year-crown-badge { position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(180deg, #ffd700 0%, #ff8c00 100%); color: #000; font-size: 9px; font-weight: 900; padding: 4px 12px; border-radius: 20px; border: 2px solid #161b22; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); white-space: nowrap; animation: badgePop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 70px; background: var(--nav-bg); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #30363d; z-index: 1000; }
.nav-item { background: none; border: none; color: #8b949e; font-size: 11px; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 6px; }
.nav-item.active-nav { color: var(--primary); }
.lb-container { width: 100%; max-width: 400px; }
.player-row { display: flex; align-items: center; padding: 12px 15px; background: #21262d; margin-bottom: 8px; border-radius: 12px; border: 1px solid #30363d; animation: fadeIn 0.5s; cursor: pointer; }
.rank-circle { width: 30px; height: 30px; background: #30363d; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px; color: var(--primary); }
.player-info { flex-grow: 1; text-align: left; }
.player-name { font-weight: 600; font-size: 14px; color: #fff; }
.player-score { font-weight: 800; color: var(--primary); font-size: 16px; }
#height { font-size: 80px; font-weight: 900; color: var(--primary); margin: 0; }
.btn-main { background: var(--primary); color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: 700; width: 100%; cursor: pointer; }
.season-badge { background: #238636; color: white; padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-bottom: 10px; display: inline-block;}
.uid-box { background: #0d1117; padding: 5px 10px; border-radius: 8px; font-size: 11px; color: #8b949e; margin-top: 5px; display: inline-block; border: 1px solid #30363d; letter-spacing: 1px; font-family: monospace; }
@keyframes rotateGold { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes badgePop { 0% { transform: translateX(-50%) scale(0); } 100% { transform: translateX(-50%) scale(1); } }
@keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
/* Mail Modal */
.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 3000; backdrop-filter: blur(5px); animation: fadeIn 0.3s; }
.modal-card { width: 90%; max-width: 350px; background: #161b22; border: 1px solid #30363d; }
.mail-item { background: #0d1117; border: 1px solid #30363d; padding: 15px; border-radius: 10px; margin-bottom: 10px; position: relative; }
.mail-title { font-weight: bold; color: var(--primary); margin-bottom: 5px; font-size: 14px; }
.mail-msg { font-size: 12px; color: #c9d1d9; margin-bottom: 10px; }
.claim-btn { background: linear-gradient(45deg, #ffd700, #ff8c00); border: none; color: #000; font-weight: bold; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 12px; }
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
import { getDatabase, ref, set, get, onValue, remove, push, query, orderByChild, equalTo } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
const firebaseConfig = {
Â Â Â Â apiKey: "AIzaSyDOPErXM1g4vdmiVdau67U7vGRsmbtMMhE",
Â Â Â Â authDomain: "white-drack-fd1ee.firebaseapp.com",
Â Â Â Â databaseURL: "https://white-drack-fd1ee-default-rtdb.firebaseio.com",
Â Â Â Â projectId: "white-drack-fd1ee",
Â Â Â Â storageBucket: "white-drack-fd1ee.firebasestorage.app",
Â Â Â Â messagingSenderId: "151227903888",
Â Â Â Â appId: "1:151227903888:web:02a2d7ab14f7d1e152cd15"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
const provider = new GoogleAuthProvider();
let currentUser = null; 
let seasonBestScore = 0;
// --- UTILS ---
function getSeasonID() {
Â Â Â Â const now = new Date();
Â Â Â Â return `season_${now.getFullYear()}_${now.getMonth() + 1}`;
}
function getSeasonInfo() {
Â Â Â Â const now = new Date(); const d = now.getDate();
Â Â Â Â const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
Â Â Â Â const seasonName = `${monthNames[now.getMonth()]} ${now.getFullYear()}`;
Â Â Â Â if(document.getElementById('seasonDisplay')) {
Â Â Â Â Â Â Â Â document.getElementById('seasonDisplay').innerText = "Season: " + seasonName;
Â Â Â Â Â Â Â Â document.getElementById('lbSeasonName').innerText = "Leaderboard for " + seasonName;
Â Â Â Â }
Â Â Â Â let round = 1; if (d > 7) round = 2; if (d > 14) round = 3; if (d > 21) round = 4; if (d > 28) round = "FINAL";
Â Â Â Â return { text: round === "FINAL" ? "Finalizing..." : `Round ${round}`, seasonID: getSeasonID() };
}
if(document.getElementById('roundDisplay')) document.getElementById('roundDisplay').innerText = getSeasonInfo().text;
window.login = () => signInWithPopup(auth, provider);
window.logout = () => signOut(auth);
onAuthStateChanged(auth, (user) => {
Â Â Â Â if (user) {
Â Â Â Â Â Â Â Â currentUser = user;
Â Â Â Â Â Â Â Â document.getElementById('bottomNav').style.display = 'flex';
Â Â Â Â Â Â Â Â loadUserData(user);
Â Â Â Â Â Â Â Â navTo('jumpPage', document.querySelector('.nav-item'));
Â Â Â Â } else {
Â Â Â Â Â Â Â Â document.getElementById('bottomNav').style.display = 'none';
Â Â Â Â Â Â Â Â navTo('loginPage');
Â Â Â Â }
});
window.navTo = (pageId, el) => {
Â Â Â Â document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
Â Â Â Â document.getElementById(pageId).classList.add('active');
Â Â Â Â if(el) { document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active-nav')); el.classList.add('active-nav'); }
Â Â Â Â if(pageId === 'leaderboardPage') loadLeaderboard();
};
// --- MODAL CONTROLS ---
window.openSearchModal = () => { document.getElementById('searchModal').style.display = 'flex'; };
window.closeSearchModal = () => { document.getElementById('searchModal').style.display = 'none'; };
window.openMailbox = () => { document.getElementById('mailModal').style.display = 'flex'; fetchMail(); };
window.closeMailbox = () => { document.getElementById('mailModal').style.display = 'none'; };
// --- NUMERIC ID LOGIC ---
async function getOrGeneratePublicID(user) {
Â Â Â Â const idRef = ref(db, `users/${user.uid}/publicID`);
Â Â Â Â const snap = await get(idRef);
Â Â Â Â if (snap.exists()) {
Â Â Â Â Â Â Â Â return snap.val();
Â Â Â Â } else {
Â Â Â Â Â Â Â Â const newID = Math.floor(10000000 + Math.random() * 90000000);
Â Â Â Â Â Â Â Â await set(idRef, newID);
Â Â Â Â Â Â Â Â return newID;
Â Â Â Â }
}
// --- SEARCH LOGIC (Updated to use Modal Input) ---
window.searchPlayer = async () => {
Â Â Â Â // Note: Now using 'modalSearchInput'
Â Â Â Â const inputVal = document.getElementById('modalSearchInput').value.trim();
Â Â Â Â if(!inputVal) { alert("Please enter Player ID!"); return; }
Â Â Â Â const btn = document.querySelector('.search-btn');
Â Â Â Â const originalText = btn.innerText;
Â Â Â Â btn.innerText = "Searching...";
Â Â Â Â try {
Â Â Â Â Â Â Â Â const usersRef = ref(db, 'users');
Â Â Â Â Â Â Â Â const q = query(usersRef, orderByChild('publicID'), equalTo(parseInt(inputVal)));
Â Â Â Â Â Â Â Â const snapshot = await get(q);
Â Â Â Â Â Â Â Â if (snapshot.exists()) {
Â Â Â Â Â Â Â Â Â Â Â Â const data = snapshot.val();
Â Â Â Â Â Â Â Â Â Â Â Â const foundUid = Object.keys(data)[0]; 
Â Â Â Â Â Â Â Â Â Â Â Â closeSearchModal(); // Close modal on success
Â Â Â Â Â Â Â Â Â Â Â Â viewPlayer(foundUid);
Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â alert("Player ID not found.");
Â Â Â Â Â Â Â Â }
Â Â Â Â } catch (error) {
Â Â Â Â Â Â Â Â console.error(error);
Â Â Â Â Â Â Â Â alert("Search Error.");
Â Â Â Â } finally {
Â Â Â Â Â Â Â Â btn.innerText = originalText;
Â Â Â Â }
};
// --- CHAMPION LOGIC ---
function checkChampionStatus(awards, containerId) {
Â Â Â Â const container = document.getElementById(containerId);
Â Â Â Â if(!container) return;
Â Â Â Â container.classList.remove('legendary-ring');
Â Â Â Â const oldBadge = container.querySelector('.year-crown-badge');
Â Â Â Â if(oldBadge) oldBadge.remove();
Â Â Â Â if(!awards) return;
Â Â Â Â let yearCounts = {};
Â Â Â Â Object.values(awards).forEach(award => {
Â Â Â Â Â Â Â Â if(!award.isSpecial && parseInt(award.rank) === 1) { 
Â Â Â Â Â Â Â Â Â Â Â Â const year = award.seasonName.split(' ')[1];
Â Â Â Â Â Â Â Â Â Â Â Â if(year) yearCounts[year] = (yearCounts[year] || 0) + 1;
Â Â Â Â Â Â Â Â }
Â Â Â Â });
Â Â Â Â let maxGold = 0; let bestYear = "";
Â Â Â Â for(let y in yearCounts) { if(yearCounts[y] > maxGold) { maxGold = yearCounts[y]; bestYear = y; } }
Â Â Â Â if(maxGold > 0) {
Â Â Â Â Â Â Â Â container.classList.add('legendary-ring');
Â Â Â Â Â Â Â Â container.innerHTML += `<div class="year-crown-badge">ðŸ‘‘ ${bestYear} King</div>`;
Â Â Â Â }
}
// --- MAIL SYSTEM ---
function fetchMail() {
Â Â Â Â if(!currentUser) return;
Â Â Â Â const list = document.getElementById('mailList');
Â Â Â Â 
Â Â Â Â onValue(ref(db, `users/${currentUser.uid}/inbox`), (snap) => {
Â Â Â Â Â Â Â Â if(!snap.exists()) {
Â Â Â Â Â Â Â Â Â Â Â Â list.innerHTML = '<p style="color:#555; text-align:center; padding:20px;">Inbox is empty.</p>';
Â Â Â Â Â Â Â Â Â Â Â Â document.getElementById('mailCount').style.display = 'none';
Â Â Â Â Â Â Â Â Â Â Â Â return;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â const mails = snap.val();
Â Â Â Â Â Â Â Â let html = "";
Â Â Â Â Â Â Â Â let count = 0;
Â Â Â Â Â Â Â Â Object.entries(mails).forEach(([key, mail]) => {
Â Â Â Â Â Â Â Â Â Â Â Â count++;
Â Â Â Â Â Â Â Â Â Â Â Â let btn = "";
Â Â Â Â Â Â Â Â Â Â Â Â if (mail.type === "special_trophy") {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â window[`trophy_${key}`] = mail.trophyData;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â btn = `<button onclick="claimTrophy('${key}')" class="claim-btn" style="background:linear-gradient(45deg, #7928ca, #ff0080); color:white;"><i class="fas fa-trophy"></i> CLAIM TROPHY</button>`;
Â Â Â Â Â Â Â Â Â Â Â Â } else if (mail.reward) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â btn = `<button onclick="claimReward('${key}', ${mail.reward})" class="claim-btn"><i class="fas fa-coins"></i> CLAIM +${mail.reward}m SCORE</button>`;
Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â btn = `<button onclick="deleteMail('${key}')" class="claim-btn" style="background:#30363d; color:#fff;">Dismiss</button>`;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â html += `
Â Â Â Â Â Â Â Â Â Â Â Â <div class="mail-item">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="mail-title">${mail.title}</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="mail-msg">${mail.message}</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ${btn}
Â Â Â Â Â Â Â Â Â Â Â Â </div>`;
Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â list.innerHTML = html;
Â Â Â Â Â Â Â Â const badge = document.getElementById('mailCount');
Â Â Â Â Â Â Â Â if(count > 0) { badge.innerText = count; badge.style.display = 'flex'; } 
Â Â Â Â Â Â Â Â else { badge.style.display = 'none'; }
Â Â Â Â });
}
window.claimReward = async (mailId, rewardAmount) => {
Â Â Â Â if(!currentUser) return;
Â Â Â Â const season = getSeasonInfo().seasonID;
Â Â Â Â if(confirm(`Claim ${rewardAmount}m reward?`)) {
Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â const userRef = ref(db, `${season}/users/${currentUser.uid}/totalScore`);
Â Â Â Â Â Â Â Â Â Â Â Â const snap = await get(userRef);
Â Â Â Â Â Â Â Â Â Â Â Â let currentScore = snap.exists() ? parseFloat(snap.val()) : 0;
Â Â Â Â Â Â Â Â Â Â Â Â let newScore = currentScore + parseFloat(rewardAmount);
Â Â Â Â Â Â Â Â Â Â Â Â await set(ref(db, `${season}/users/${currentUser.uid}`), { name: currentUser.displayName, photo: currentUser.photoURL, totalScore: newScore });
Â Â Â Â Â Â Â Â Â Â Â Â seasonBestScore = newScore;
Â Â Â Â Â Â Â Â Â Â Â Â await remove(ref(db, `users/${currentUser.uid}/inbox/${mailId}`));
Â Â Â Â Â Â Â Â Â Â Â Â alert("Score Boosted!");
Â Â Â Â Â Â Â Â } catch(e) { console.error(e); }
Â Â Â Â }
};
window.claimTrophy = async (mailId) => {
Â Â Â Â if(!currentUser) return;
Â Â Â Â const tData = window[`trophy_${mailId}`];
Â Â Â Â if(!tData) { alert("Error finding trophy data."); return; }
Â Â Â Â if(confirm(`Claim '${tData.name}' Trophy?`)) {
Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â await push(ref(db, `users/${currentUser.uid}/awards`), {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â seasonName: tData.date,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â rank: "Special",
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â isSpecial: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â specialData: tData
Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â await remove(ref(db, `users/${currentUser.uid}/inbox/${mailId}`));
Â Â Â Â Â Â Â Â Â Â Â Â delete window[`trophy_${mailId}`];
Â Â Â Â Â Â Â Â Â Â Â Â alert("ðŸ† Trophy added to profile!");
Â Â Â Â Â Â Â Â } catch(e) { console.error(e); }
Â Â Â Â }
};
window.deleteMail = async (mailId) => { if(currentUser) await remove(ref(db, `users/${currentUser.uid}/inbox/${mailId}`)); };
// --- AWARD RENDERER ---
function renderAwards(snap, listId) {
Â Â Â Â const list = document.getElementById(listId);
Â Â Â Â if(!snap.exists()) { list.innerHTML = `<p style="grid-column: span 3; color:#555; text-align:center;">No trophies yet.</p>`; return; }
Â Â Â Â 
Â Â Â Â list.innerHTML = "";
Â Â Â Â const awards = snap.val();
Â Â Â Â Object.values(awards).forEach(a => {
Â Â Â Â Â Â Â Â if (a.isSpecial) {
Â Â Â Â Â Â Â Â Â Â Â Â const s = a.specialData;
Â Â Â Â Â Â Â Â Â Â Â Â list.innerHTML += `
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="special-trophy-card ${s.style}">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas ${s.icon} special-icon"></i>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="special-title">${s.name}</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>`;
Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â let rank = parseInt(a.rank);
Â Â Â Â Â Â Â Â Â Â Â Â let cls = rank===1?'rank-1':rank===2?'rank-2':rank===3?'rank-3':'rank-top';
Â Â Â Â Â Â Â Â Â Â Â Â let icn = rank<=3?'fa-trophy':'fa-medal';
Â Â Â Â Â Â Â Â Â Â Â Â list.innerHTML += `
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div class="award-card ${cls}">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <i class="fas ${icn} ${cls}" style="font-size:20px;"></i>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div style="font-weight:bold; color:#fff; font-size:12px;">#${rank}</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <div style="font-size:8px; color:#888;">${a.seasonName}</div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </div>`;
Â Â Â Â Â Â Â Â }
Â Â Â Â });
}
async function loadUserData(user) {
Â Â Â Â const season = getSeasonInfo().seasonID;
Â Â Â Â 
Â Â Â Â // Numeric ID Logic
Â Â Â Â const publicID = await getOrGeneratePublicID(user);
Â Â Â Â document.getElementById('pUid').innerText = publicID;
Â Â Â Â document.getElementById('pName').innerText = user.displayName;
Â Â Â Â document.getElementById('pImg').src = user.photoURL;
Â Â Â Â 
Â Â Â Â onValue(ref(db, `${season}/users/${user.uid}/totalScore`), (s) => {
Â Â Â Â Â Â Â Â seasonBestScore = s.exists() ? parseFloat(s.val()) : 0;
Â Â Â Â Â Â Â Â document.getElementById('pTotal').innerText = seasonBestScore.toFixed(2) + "m";
Â Â Â Â Â Â Â Â document.getElementById('todayBest').inne
