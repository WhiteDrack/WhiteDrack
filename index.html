<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Height Meter (Angle Based)</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: sans-serif; background: #000; }
        video { width: 100vw; height: 100vh; object-fit: cover; }
        .crosshair {
            position: absolute; top: 50%; left: 50%;
            width: 30px; height: 30px; border: 2px solid white;
            border-radius: 50%; transform: translate(-50%, -50%);
        }
        .ui {
            position: absolute; bottom: 50px; width: 100%; text-align: center;
            color: white; z-index: 10;
        }
        .result { font-size: 2rem; font-weight: bold; background: rgba(0,0,0,0.6); padding: 10px; }
        button { padding: 15px 30px; font-size: 1.2rem; border-radius: 10px; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <video id="video" autoplay playsinline></video>
    <div class="crosshair"></div>

    <div class="ui">
        <div class="result" id="display">Height: 0.00 m</div><br>
        <button id="btnBase">Set Base (Niche)</button>
        <button id="btnTop">Set Top (Upar)</button>
    </div>

    <script>
        let baseAngle = 0;
        let currentAngle = 0;
        const phoneHeight = 1.5; // Maan lijiye aap 1.5 meter ki height par phone pakde hain

        // Camera Start
        navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
            .then(s => document.getElementById('video').srcObject = s);

        // Angle detect karna
        window.addEventListener('deviceorientation', (e) => {
            currentAngle = e.beta; // Phone kitna jhuka hai
        });

        document.getElementById('btnBase').onclick = () => {
            baseAngle = currentAngle;
            alert("Base Set! Ab object ke top par nishana lagayein.");
        };

        document.getElementById('btnTop').onclick = () => {
            let angleDiff = Math.abs(currentAngle - baseAngle);
            // Trigonometry: Height = Distance * tan(angle)
            // Yahan hum angle ke difference se ek estimate nikal rahe hain
            let height = Math.abs(Math.tan(angleDiff * Math.PI / 180) * 2).toFixed(2); 
            document.getElementById('display').innerText = "Height: " + height + " m";
        };

        // Permission mangna (iPhone ke liye zaroori)
        if (typeof DeviceOrientationEvent.requestPermission === 'function') {
            document.body.onclick = () => {
                DeviceOrientationEvent.requestPermission();
            };
        }
    </script>
</body>
</html>

